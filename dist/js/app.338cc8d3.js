(function(e){function t(t){for(var n,o,l=t[0],s=t[1],c=t[2],u=0,f=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary"}}),a("v-main",[a("Main")],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[[a("v-data-table",{staticClass:"elevation-1",staticStyle:{"margin-top":"30px"},attrs:{headers:e.headers,items:e.users,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Пользователи")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mx-2",attrs:{color:"primary",fab:"",dark:"",small:""}},"v-btn",r,!1),n),[a("v-icon",[e._v(" mdi-plus ")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"justify-space-between"},[a("span",{staticClass:"headline"},[e._v("Форма пользователя")]),a("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"warning"},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-close ")])],1)],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{counter:10,rules:e.nameRules,label:"Имя*",required:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"Email*",required:""},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{directives:[{name:"facade",rawName:"v-facade",value:"+1 (###) ###-####",expression:"'+1 (###) ###-####'"}],attrs:{label:"Номер телефона*",rules:e.phoneRules,placeholder:"111 111-1111'",type:"text",required:""},model:{value:e.editedItem.phone_number,callback:function(t){e.$set(e.editedItem,"phone_number",t)},expression:"editedItem.phone_number"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Birthday date*",rules:e.dateRules,"prepend-icon":"mdi-calendar",readonly:""},on:{blur:function(t){e.date=e.parseDate(e.dateFormatted)}},model:{value:e.editedItem.date_of_birth,callback:function(t){e.$set(e.editedItem,"date_of_birth",t)},expression:"editedItem.date_of_birth"}},"v-text-field",r,!1),n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{ref:"picker",attrs:{max:(new Date).toISOString().substr(0,10),min:"1950-01-01"},on:{change:e.save},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)],1)],1)],1),a("small",{},[e._v("* помеченны обязательные поля")])],1),a("v-card-actions",{staticStyle:{"justify-content":"center"}},[a("v-spacer"),a("v-btn",{staticClass:"ma-2",attrs:{block:"",loading:e.loading,disabled:e.loading,color:"primary"},on:{click:e.saveUser}},[e._v(" Сохранить ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Удалить пользователя?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Отмена")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Да")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(n)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(n)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-toolbar-title",[e._v("Пользователи отсутствуют")])]},proxy:!0}])})]],2)],1)},l=[],s=a("1da1"),c=a("3835"),d=(a("96cf"),a("1276"),a("ac1f"),a("99af"),a("4d90"),a("a434"),{BASE_URL:"https://app-for-test-telegram-bot.herokuapp.com"}),u=a("bc3a"),f=a.n(u),m={name:"Main",data:function(e){return{dialogDelete:!1,headers:[{text:"Имя пользователя",align:"start",sortable:!0,value:"name"},{text:"День рождения",value:"date_of_birth"},{text:"Email",value:"email"},{text:"Номер телефона",value:"phone_number"},{text:"Actions",value:"actions",sortable:!1}],users:[],editedIndex:-1,editedItem:{name:"",date_of_birth:"",email:"",phone_number:""},defaultItem:{name:"",date_of_birth:"",email:"",phone_number:""},loader:null,loading:!1,phone:null,date:null,dateFormatted:e.formatDate((new Date).toISOString().substr(0,10)),menu:!1,dialog:!1,valid:!0,name:null,nameRules:[function(e){return!!e||"Имя обязательно!"},function(e){return e&&e.length<=10||"Количество символов должно быть меньше 10."},function(e){return/^[A-Za-z]+$/.test(e)||"Только латинские буквы."}],email:null,emailRules:[function(e){return!!e||"Поле E-mail обязательно!"},function(e){return/.+@.+\..+/.test(e)||"Введите валидный E-mail."}],phoneRules:[function(e){return!!e||"Введите номер телефона!"}],dateRules:[function(e){return!!e||"Укажите день дату вашего рождения!"}]}},computed:{computedDateFormatted:function(){return this.formatDate(this.date)},formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},created:function(){this.initialize()},methods:{save:function(e){this.$refs.menu.save(e),this.editedItem.date_of_birth=this.computedDateFormatted},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},formatDate:function(e){if(!e)return null;var t=e.split("-"),a=Object(c["a"])(t,3),n=a[0],r=a[1],i=a[2];return"".concat(r,"/").concat(i,"/").concat(n)},parseDate:function(e){if(!e)return null;var t=e.split("/"),a=Object(c["a"])(t,3),n=a[0],r=a[1],i=a[2];return"".concat(i,"-").concat(n.padStart(2,"0"),"-").concat(r.padStart(2,"0"))},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.users.splice(this.editedIndex,1),f.a.post("".concat(d.BASE_URL,"/api/remove"),{email:this.editedItem.email},{headers:{"Access-Control-Allow-Origin":"*"}}),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},saveUser:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(e.loader="loading",!(e.editedIndex>-1)){t.next=10;break}return t.next=6,f.a.post("".concat(d.BASE_URL,"/api/update"),e.editedItem,{headers:{"Access-Control-Allow-Origin":"*"}});case 6:a=t.sent,Object.assign(e.users[e.editedIndex],a.data),t.next=14;break;case 10:return t.next=12,f.a.post("".concat(d.BASE_URL,"/api/create"),e.editedItem,{headers:{"Access-Control-Allow-Origin":"*"}});case 12:n=t.sent,e.users.push(n.data);case 14:e.close();case 15:case"end":return t.stop()}}),t)})))()},initialize:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("".concat(d.BASE_URL,"/api/"),{headers:{"Access-Control-Allow-Origin":"*"}});case 2:a=t.sent,e.users=a.data;case 4:case"end":return t.stop()}}),t)})))()}},watch:{dialog:function(e){var t=this;e||this.close(),this.$nextTick((function(){t.$refs.form.resetValidation()}))},dialogDelete:function(e){e||this.closeDelete()},menu:function(e){var t=this;e&&setTimeout((function(){return t.$refs.picker.activePicker="YEAR"}))},date:function(){this.dateFormatted=this.formatDate(this.date)},loader:function(){var e=this,t=this.loader;this[t]=!this[t],setTimeout((function(){return e[t]=!1}),2e3),this.loader=null}}},v=m,p=a("2877"),h=a("6544"),b=a.n(h),x=a("8336"),g=a("b0af"),_=a("99d9"),k=a("62ad"),I=a("a523"),y=a("8fea"),w=a("2e4b"),O=a("169a"),D=a("ce7e"),j=a("4bd4"),V=a("132d"),S=a("e449"),C=a("0fd9"),A=a("2fa4"),R=a("8654"),$=a("71d9"),T=a("2a7f"),E=Object(p["a"])(v,o,l,!1,null,null,null),M=E.exports;b()(E,{VBtn:x["a"],VCard:g["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:_["c"],VCol:k["a"],VContainer:I["a"],VDataTable:y["a"],VDatePicker:w["a"],VDialog:O["a"],VDivider:D["a"],VForm:j["a"],VIcon:V["a"],VMenu:S["a"],VRow:C["a"],VSpacer:A["a"],VTextField:R["a"],VToolbar:$["a"],VToolbarTitle:T["a"]});var P={name:"App",components:{Main:M},data:function(){return{}}},B=P,F=a("7496"),U=a("40dc"),L=a("f6c4"),z=Object(p["a"])(B,r,i,!1,null,null,null),q=z.exports;b()(z,{VApp:F["a"],VAppBar:U["a"],VMain:L["a"]});var J=a("f309");n["a"].use(J["a"]);var N=new J["a"]({}),Y=a("9c87"),Z=a.n(Y);n["a"].config.productionTip=!1,n["a"].use(Z.a),new n["a"]({vuetify:N,render:function(e){return e(q)}}).$mount("#app")}});
//# sourceMappingURL=app.338cc8d3.js.map